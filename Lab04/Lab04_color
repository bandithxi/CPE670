#ifndef __LAB04_COLOR_NXC__
#define __LAB04_COLOR_NXC__




#define COLOR_SENSOR IN_3


typedef struct {
  byte red;
  byte green;
  byte blue;
} RGBval;

/**
 *
 */
task TASK_colorSensor() {

   while (true) {
    // int x = SensorHTColorNum(COLOR_SENSOR);
      
      
    // we might be able to use RGB values to somehow compensate for ppor
    // color number results
    byte colorNum;
    byte red;
    byte green;
    byte blue;
      
    bool readSuccess = ReadSensorHTColor(
      COLOR_SENSOR,
      colorNum,
      red,
      green,
      blue
    );
    Wait(MS_50);
      
    if (colorNum > 0) {

      ClearScreen();
      NumOut(4, LCD_LINE2, blue);


      Acquire(gScoreMutex);
      gFoodCount++;
      PlayTone(TONE_A5, MS_100);
      Release(gScoreMutex);

    }
  }
}

#endif //__LAB04_COLOR_NXC__